!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico",n="elementMount",r="elementUnmount",i="elementReceiveProps";function o(t,e){for(var n={},r=0;r<t.length;r++){var i=t[r],o=e instanceof HTMLElement?e.getAttribute(i):e[i];n[i.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()})]=o}return n}function s(t){return t.shadowRoot||t}function c(t,e){s(t).removeChild(e)}function a(t,e){s(t).appendChild(e)}function f(t,e,n){s(t).replaceChild(e,n)}function p(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function l(t){return"object"==typeof t&&11!==t.nodeType}function u(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?u(r,e):e.push("object"==typeof(i=r)&&i instanceof p?r:l(r)?new p(r,{},""):new p("",{},r||""))}var i;return e}function h(t,e,n,r,o){for(var s=Object.keys(e).concat(Object.keys(n)),c=0;c<s.length;c++){var a=s[c];if(o="class"===o?"className":o,e[a]!==n[a]){if(o&&t._props.indexOf(a)>-1){o[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof e[a])e[a]&&t.removeEventListener(a,e[a]),t.addEventListener(a,n[a]);else if(a in n)if(a in t&&!r||r&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var f in n[a])t.style[f]=n[a][f];else t.style.cssText=n[a];else t[a]=n[a];else{if(r&&"xmlns"===a)continue;r?t.setAttributeNS(null,a,n[a]):t.setAttribute(a,n[a])}else t.removeAttribute(a)}}o&&t.dispatch(i,o)}function d(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}var v=function(t){function v(){for(t.call(this),this[e]=!0,this.state={},this.slots={},this._props=this.constructor.props||[],this._render=[],this.props=o(this._props,this),this.props.children=[],this.fragment=document.createDocumentFragment();this.firstChild;){var n=this.firstChild,r=n.getAttribute&&n.getAttribute("slot");r&&(this.slots[r]=n),a(this.fragment,n),this.props.children.push(n)}this.load()}t&&(v.__proto__=t),v.prototype=Object.create(t&&t.prototype),v.prototype.constructor=v;var g={observedAttributes:{configurable:!0}};return g.observedAttributes.get=function(){return this.props||[]},v.prototype.load=function(){var t=this,e=!0;this.listeners=[n,r,i].map(function(r){var o=function(o){o.type===r&&(r===n&&(e=!1),e||(t[r]&&t[r](o),o.defaultPrevented||(r===i&&(t.props=Object.assign({},t.props,o.detail)),t.setState({}))))};return t.addEventListener(r,o),function(){return t.removeEventListener(r,o)}})},v.prototype.connectedCallback=function(){this.dispatch(n)},v.prototype.disconnectedCallback=function(){this.dispatch(r),this.listeners.forEach(function(t){return t()})},v.prototype.attributeChangedCallback=function(t,e,n){var r;e!==n&&this.dispatch(i,o([t],((r={})[t]=n,r)))},v.prototype.dispatch=function(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))},v.prototype.setState=function(t){if(t){this.state=Object.assign({},this.state,t);var n=u([this.render()]);!function t(n,r,i,o,s){void 0===o&&(o=n);for(var u=n.childNodes||[],v=Math.max(r.length,i.length),g=0;g<v;g++){var m=r[g]||new p,y=i[g],b=u[g];if(y){y=d(y,o),m=d(m,o);var C=b,E=l(y.tag);if(s=s||"svg"===y.tag,m.tag!==y.tag)if(E)C=y.tag,b?f(n,C,b):a(n,C);else if(y.tag)if(C=s?document.createElementNS("http://www.w3.org/2000/svg",y.tag):document.createElement(y.tag),b){if(f(n,C,b),!C[e])for(;b.firstChild;)a(C,b.firstChild)}else a(n,C);else C=document.createTextNode(""),m.tag?f(n,C,b):a(n,C);E||"#text"!==C.nodeName?(h(C,m.props,y.props,s,C[e]&&{children:y.children.map(function(t){return t.tag?t:t.children})}),E||!C||C[e]||t(C,m.children,y.children,o,s)):m.children!==y.children&&(C.textContent=y.children)}else b&&c(n,b)}}(s(this),this._render,n),this._render=n}},v.prototype.render=function(){},Object.defineProperties(v,g),v}(HTMLElement);t.h=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new p(t,e,u(n))},t.Element=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.es5.umd.js.map
