!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico",n="elementMount",r="elementUnmount",i="elementUpdate";function o(t){return requestAnimationFrame(t)}function s(t){return t.shadowRoot||t}function c(t,e){s(t).removeChild(e)}function p(t,e){s(t).appendChild(e)}function a(t,e,n){s(t).replaceChild(e,n)}function u(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function f(t){return null!==t&&"object"==typeof t&&11!==t.nodeType}function l(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?l(r,e):e.push("object"==typeof(i=r)&&i instanceof u?r:f(r)?new u(r,{},""):new u("",{},r||""))}var i;return e}function h(t,e,n,r,i){for(var o=Object.keys(e).concat(Object.keys(n)),s=0;s<o.length;s++){var c=o[s];if(e[c]!==n[c]){if(i&&t._props.indexOf(c)>-1){i[c]=n[c];continue}if("function"==typeof n[c]||"function"==typeof e[c])e[c]&&t.removeEventListener(c,e[c]),t.addEventListener(c,n[c]);else if(c in n)if(c in t&&!r||r&&"style"===c)if("style"===c)if("object"==typeof n[c])for(var p in n[c])t.style[p]=n[c][p];else t.style.cssText=n[c];else t[c]=n[c];else{if(r&&"xmlns"===c)continue;r?t.setAttributeNS(null,c,n[c]):t.setAttribute(c,n[c])}else t.removeAttribute(c)}}i&&t.setProps(i)}function d(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}var v=function(t){function v(){t.call(this),this[e]=!0,this.state={},this.slots={},this.props={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._listener=[],this._mount,this._prevent,this.livecycle()}t&&(v.__proto__=t),v.prototype=Object.create(t&&t.prototype),v.prototype.constructor=v;var m={observedAttributes:{configurable:!0}};return m.observedAttributes.get=function(){return["children"].concat(this.props||[])},v.prototype.livecycle=function(){var t=this;this.addEventListener(n,function(e){return t[n]&&t[n](e)}),this.addEventListener(r,function(e){return t[r]&&t[r](e)}),this.addEventListener(i,function(e){return t[i]&&t[i](e)}),this.addEventListener("elementReceiveProps",function(e){t.elementReceiveProps&&t.elementReceiveProps(e),e.defaultPrevented||t.setState({})})},v.prototype.setAttribute=function(e,n){var r;this._props.indexOf(e)>-1?this.setProps(Object.assign({},this.props,((r={})[e]=n,r))):t.prototype.setAttribute.call(this,e,n)},v.prototype.connectedCallback=function(){var t=this;this.props.children=[],o(function(){for(;t.firstChild;){var e=t.firstChild,r=e.getAttribute&&e.getAttribute("slot");r&&(t.slots[r]=e),p(t.fragment,e),t.props.children.push(e)}t.setState({},t._mount=!0),t.dispatch(n)})},v.prototype.disconnectedCallback=function(){this.dispatch(r),this._listener.forEach(function(t){return t()})},v.prototype.setProps=function(t){var e,n={};for(var r in t)-1!==this._props.indexOf(r)&&(n[(e=r,e.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()}))]=t[r]);this._mount&&this.dispatch("elementReceiveProps",n),this.props=n},v.prototype.attributeChangedCallback=function(t,e,n){var r;this.setProps(Object.assign({},this.props,((r={})[t]=n,r)))},v.prototype.addEventListener=function(e,n,r){var i=this;t.prototype.addEventListener.call(this,e,n,r),this._listener.push(function(){return i.removeEventListener(e,n)})},v.prototype.dispatch=function(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))},v.prototype.setState=function(t,n){var r=this;t&&(this.state=Object.assign({},this.state,t),this._prevent||(this._prevent=!0,o(function(){var t=l([r.render()]);!function t(n,r,i,o,s){void 0===o&&(o=n);for(var l=n.childNodes||[],v=Math.max(r.length,i.length),m=0;m<v;m++){var y=r[m]||new u,g=i[m],b=l[m];if(g){g=d(g,o),y=d(y,o);var _=b,E=f(g.tag);if(s=s||"svg"===g.tag,y.tag!==g.tag)if(E)_=g.tag,b?a(n,_,b):p(n,_);else if(g.tag)if(_=s?document.createElementNS("http://www.w3.org/2000/svg",g.tag):document.createElement(g.tag),b){if(a(n,_,b),!_[e])for(;b.firstChild;)p(_,b.firstChild)}else p(n,_);else _=document.createTextNode(""),y.tag?a(n,_,b):p(n,_);E||"#text"!==_.nodeName?(h(_,y.props,g.props,s,_[e]&&{children:g.children.map(function(t){return t.tag?t:t.children})}),E||!_||_[e]||t(_,y.children,g.children,o,s)):y.children!==g.children&&(_.textContent=g.children)}else b&&c(n,b)}}(s(r),r._render,t),r._render=t,r._prevent=!1,n||r.dispatch(i)})))},v.prototype.render=function(){},Object.defineProperties(v,m),v}(HTMLElement);t.h=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new u(t,e,l(n))},t.Element=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.es5.umd.js.map
