var ELEMENT="Atomico",MOUNT="elementMount",UNMOUNT="elementUnmount",RECEIVE_PROPS="elementReceiveProps";function getProps(t,e,n){void 0===n&&(n={});for(var i=e instanceof HTMLElement,s=0;s<t.length;s++){var r=t[s],o=i?e.getAttribute(r):e[r];i&&""===o&&(o=!0),n[r.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()})]=null===o?void 0:o}return n}function root(t){return t.shadowRoot||t}function remove(t,e){root(t).removeChild(e)}function append(t,e){root(t).appendChild(e)}function replace(t,e,n){root(t).replaceChild(e,n)}function h(t,e){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return new VDom(t,e,concat(n))}function VDom(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function isDom(t){return null!==t&&"object"==typeof t&&11!==t.nodeType}function isVDom(t){return"object"==typeof t&&t instanceof VDom}function concat(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?concat(i,e):e.push(isVDom(i)?i:isDom(i)?new VDom(i,{},""):new VDom("",{},i||""))}return e}function diffProps(t,e,n,i,s){for(var r=Object.keys(e).concat(Object.keys(n)),o=0;o<r.length;o++){var a=r[o];if(e[a]!==n[a]){if(s&&t._props.indexOf(a)>-1){s[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof e[a])e[a]&&t.removeEventListener(a,e[a]),t.addEventListener(a,n[a]);else if(a in n)if(a in t&&!i||i&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var c in n[a])t.style[c]=n[a][c];else t.style.cssText=n[a];else t[a]=n[a];else{if(i&&"xmlns"===a)continue;i?t.setAttributeNS(null,a,n[a]):t.setAttribute(a,n[a])}else t.removeAttribute(a)}}s&&t.dispatch(RECEIVE_PROPS,s)}function slot(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}function diff(t,e,n,i,s){void 0===i&&(i=t);for(var r=t.childNodes||[],o=Math.max(e.length,n.length),a=0;a<o;a++){var c=e[a]||new VDom,l=n[a],p=r[a];if(l){l=slot(l,i),c=slot(c,i);var h=p,f=isDom(l.tag);if(s=s||"svg"===l.tag,c.tag!==l.tag)if(f)h=l.tag,p?replace(t,h,p):append(t,h);else if(l.tag)if(h=s?document.createElementNS("http://www.w3.org/2000/svg",l.tag):document.createElement(l.tag),p){if(replace(t,h,p),!h[ELEMENT])for(;p.firstChild;)append(h,p.firstChild)}else append(t,h);else h=document.createTextNode(""),c.tag?replace(t,h,p):append(t,h);f||"#text"!==h.nodeName?(diffProps(h,c.props,l.props,s,h[ELEMENT]&&{children:l.children.map(function(t){return t.tag?t:t.children})}),f||!h||h[ELEMENT]||diff(h,c.children,l.children,i,s)):c.children!==l.children&&(h.textContent=l.children)}else p&&remove(t,p)}}class element extends HTMLElement{constructor(){super(),this[ELEMENT]=!0,this.state={},this.slots={},this.props={},this.fixProps={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._mount,this.livecycle()}static get observedAttributes(){return this.props||[]}livecycle(){var t=this;this.listeners=[MOUNT,UNMOUNT,RECEIVE_PROPS].map(function(e){var n=function(n){t._mount&&(t[e]&&t[e](n),n.defaultPrevented||(e===RECEIVE_PROPS&&(t.props=getProps(Object.keys(n.detail),n.detail,Object.assign({},t.props))),t.setState({})))};return t.addEventListener(e,n),function(){return t.removeEventListener(e,n)}})}setAttribute(t,e){var n;this._props.indexOf(t)>-1?this._mount?this.attributeChangedCallback(t,this.props[t],e):getProps([t],((n={})[t]=e,n),this.fixProps):super.setAttribute(t,e)}connectedCallback(){for(this._mount=!0,this.props=Object.assign({},getProps(this._props,this),this.fixProps),this.props.children=[];this.firstChild;){var t=this.firstChild,e=t.getAttribute&&t.getAttribute("slot");e&&(this.slots[e]=t),append(this.fragment,t),this.props.children.push(t)}this.dispatch(MOUNT)}disconnectedCallback(){this.dispatch(UNMOUNT),this.listeners.forEach(function(t){return t()})}attributeChangedCallback(t,e,n){var i;e!==n&&this.dispatch(RECEIVE_PROPS,getProps([t],((i={})[t]=n,i)))}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}setState(t){if(t){this.state=Object.assign({},this.state,t);var e=concat([this.render()]);diff(root(this),this._render,e),this._render=e}}render(){}}export{h,element as Element};
//# sourceMappingURL=atomico.m.js.map
