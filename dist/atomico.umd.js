!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.atomico={})}(this,function(e){"use strict";var t="Atomico";function n(e){return Promise.resolve().then(e)}function r(e){return e.shadowRoot||e}function s(e,t){r(e).removeChild(t)}function i(e,t){r(e).appendChild(t)}function o(e,t,n){r(e).replaceChild(t,n)}function c(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function a(e){return null!==e&&"object"==typeof e&&11!==e.nodeType}function l(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?l(r,t):t.push("object"==typeof(s=r)&&s instanceof c?r:a(r)?new c(r,{},""):new c("",{},r||""))}var s;return t}function h(e,t,n,r,s){for(var i=Object.keys(t).concat(Object.keys(n)),o=0;o<i.length;o++){var c=i[o];if(t[c]!==n[c]){if(s&&e._props.indexOf(c)>-1){s[c]=n[c];continue}if("function"==typeof n[c]||"function"==typeof t[c])t[c]&&e.removeEventListener(c,t[c]),e.addEventListener(c,n[c]);else if(c in n)if(c in e&&!r||r&&"style"===c)if("style"===c)if("object"==typeof n[c])for(var a in n[c])e.style[a]=n[c][a];else e.style.cssText=n[c];else e[c]=n[c];else{if(r&&"xmlns"===c)continue;r?e.setAttributeNS(null,c,n[c]):e.setAttribute(c,n[c])}else e.removeAttribute(c)}}s&&e.setProps(s)}function u(e,t){return"slot"===e.tag&&(e.tag=t.slots[e.props.name]||""),e}e.h=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new c(e,t,l(n))},e.Element=class extends HTMLElement{constructor(){super(),this[t]=!0,this.state={},this.slots={},this.props={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._mount,this._prevent}static get observedAttributes(){return["children"].concat(this.props||[])}setAttribute(e,t){var n;this._props.indexOf(e)>-1?this.setProps(((n={})[e]=t,n)):super.setAttribute(e,t)}connectedCallback(){var e=this;n(function(){for(var t=e.props.children||[];e.firstChild;){var n=e.firstChild,r=n.getAttribute&&n.getAttribute("slot");r&&(e.slots[r]=n),i(e.fragment,n),t.push(n)}e.setProps({children:t}),e.setState({},function(){e._mount=!0,e.elementMount()})})}disconnectedCallback(){this.elementUnmount()}setProps(e){var t={},n=this._mount;for(var r in e){var s=r.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()});e[r]!==this.props[s]&&(t[s]=e[r])}Object.keys(t).length&&(n&&(n=this.elementReceiveProps(t)),this.props=Object.assign({},this.props,t),!1!==n&&this._mount&&this.setState({}))}attributeChangedCallback(e,t,n){var r;t!==n&&this.setProps(((r={})[e]=n,r))}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{cancelable:!0,detail:t}))}setState(e,p){var f=this;e&&(this.state=Object.assign({},this.state,e),this._prevent||(this._prevent=!0,n(function(){var e=l([f.render()]);!function e(n,r,l,p,f){void 0===p&&(p=n);for(var d=n.childNodes||[],v=Math.max(r.length,l.length),m=0;m<v;m++){var g=r[m]||new c,b=l[m],y=d[m];if(b){b=u(b,p),g=u(g,p);var _=y,C=a(b.tag);if(f=f||"svg"===b.tag,g.tag!==b.tag)if(C)_=b.tag,y?o(n,_,y):i(n,_);else if(b.tag)if(_=f?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(o(n,_,y),!_[t])for(;y.firstChild;)i(_,y.firstChild)}else i(n,_);else _=document.createTextNode(""),g.tag?o(n,_,y):i(n,_);C||"#text"!==_.nodeName?(h(_,g.props,b.props,f,_[t]&&{children:b.children.map(function(e){return e.tag?e:e.children})}),C||!_||_[t]||e(_,g.children,b.children,p,f)):g.children!==b.children&&(_.textContent=b.children)}else y&&s(n,y)}}(r(f),f._render,e),f._render=e,f._prevent=!1,p?p():f.elementUpdate()})))}elementMount(){}elementUpdate(){}elementUnmount(){}elementReceiveProps(){}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
