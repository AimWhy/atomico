!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico",i="elementMount",n="elementUnmount",s="elementReceiveProps";function r(t,e,i){void 0===i&&(i={});for(var n=e instanceof HTMLElement,s=0;s<t.length;s++){var r=t[s],o=n?e.getAttribute(r):e[r];n&&""===o&&(o=!0),i[r.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()})]=null===o?void 0:o}return i}function o(t){return t.shadowRoot||t}function a(t,e){o(t).removeChild(e)}function c(t,e){o(t).appendChild(e)}function h(t,e,i){o(t).replaceChild(e,i)}function l(t,e,i){this.tag=t,this.props=e||{},this.children=i||[]}function u(t){return null!==t&&"object"==typeof t&&11!==t.nodeType}function f(t,e){void 0===e&&(e=[]);for(var i=0;i<t.length;i++){var n=t[i];Array.isArray(n)?f(n,e):e.push("object"==typeof(s=n)&&s instanceof l?n:u(n)?new l(n,{},""):new l("",{},n||""))}var s;return e}function d(t,e,i,n,r){for(var o=Object.keys(e).concat(Object.keys(i)),a=0;a<o.length;a++){var c=o[a];if(e[c]!==i[c]){if(r&&t._props.indexOf(c)>-1){r[c]=i[c];continue}if("function"==typeof i[c]||"function"==typeof e[c])e[c]&&t.removeEventListener(c,e[c]),t.addEventListener(c,i[c]);else if(c in i)if(c in t&&!n||n&&"style"===c)if("style"===c)if("object"==typeof i[c])for(var h in i[c])t.style[h]=i[c][h];else t.style.cssText=i[c];else t[c]=i[c];else{if(n&&"xmlns"===c)continue;n?t.setAttributeNS(null,c,i[c]):t.setAttribute(c,i[c])}else t.removeAttribute(c)}}r&&t.dispatch(s,r)}function p(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}t.h=function(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];return new l(t,e,f(i))},t.Element=class extends HTMLElement{constructor(){super(),this[e]=!0,this.state={},this.slots={},this.props={},this.fixProps={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._mount,this.livecycle()}static get observedAttributes(){return this.props||[]}livecycle(){var t=this;this.listeners=[i,n,s].map(function(e){var i=function(i){t._mount&&(t[e]&&t[e](i),i.defaultPrevented||(e===s&&(t.props=r(Object.keys(i.detail),i.detail,Object.assign({},t.props))),t.setState({})))};return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}})}setAttribute(t,e){var i;this._props.indexOf(t)>-1?this._mount?this.attributeChangedCallback(t,this.props[t],e):r([t],((i={})[t]=e,i),this.fixProps):super.setAttribute(t,e)}connectedCallback(){for(this._mount=!0,this.props=Object.assign({},r(this._props,this),this.fixProps),this.props.children=[];this.firstChild;){var t=this.firstChild,e=t.getAttribute&&t.getAttribute("slot");e&&(this.slots[e]=t),c(this.fragment,t),this.props.children.push(t)}this.dispatch(i)}disconnectedCallback(){this.dispatch(n),this.listeners.forEach(function(t){return t()})}attributeChangedCallback(t,e,i){var n;e!==i&&this.dispatch(s,r([t],((n={})[t]=i,n)))}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}setState(t){if(t){this.state=Object.assign({},this.state,t);var i=f([this.render()]);!function t(i,n,s,r,o){void 0===r&&(r=i);for(var f=i.childNodes||[],v=Math.max(n.length,s.length),m=0;m<v;m++){var g=n[m]||new l,b=s[m],y=f[m];if(b){b=p(b,r),g=p(g,r);var C=y,x=u(b.tag);if(o=o||"svg"===b.tag,g.tag!==b.tag)if(x)C=b.tag,y?h(i,C,y):c(i,C);else if(b.tag)if(C=o?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(h(i,C,y),!C[e])for(;y.firstChild;)c(C,y.firstChild)}else c(i,C);else C=document.createTextNode(""),g.tag?h(i,C,y):c(i,C);x||"#text"!==C.nodeName?(d(C,g.props,b.props,o,C[e]&&{children:b.children.map(function(t){return t.tag?t:t.children})}),x||!C||C[e]||t(C,g.children,b.children,r,o)):g.children!==b.children&&(C.textContent=b.children)}else y&&a(i,y)}}(o(this),this._render,i),this._render=i}}render(){}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
