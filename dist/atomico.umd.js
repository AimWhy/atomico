!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.atomico={})}(this,function(e){"use strict";function t(e,t){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];return new n(e,t,function e(t,i){void 0===i&&(i=[]);for(var o=0;o<t.length;o++){var c=t[o];Array.isArray(c)?e(c,i):i.push(s(c)?c:r(c)?new n(c,{},[""]):new n("",{},[c||""]))}return i}(i))}function n(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function r(e){return null!==e&&"object"==typeof e&&11!==e.nodeType}function s(e){return"object"==typeof e&&e instanceof n}var i="__atomico_el__",o="__atomico_prev__";function c(e){return Promise.resolve().then(e)}function a(e){return e.shadowRoot||e}function l(e,t){a(e).appendChild(t)}function p(e){var t=Array.isArray(e);return{keys:(t?e:Object.keys(e)).concat("children"),types:t?{}:e}}function u(e,t){return"slot"===e.tag?new n(t[e.props.name]||"",e.props,e.children):e}function f(e,t,s,c,p){void 0===c&&(c={});var h=t&&t[o]?t[o]:new n,d=t,v=s;if(s){if(s=u(s,c),h=u(h,c),p=p||"svg"===s.tag,e&&h.tag!==s.tag)if(d=r(s.tag)?s.tag:s.tag?p?document.createElementNS("http://www.w3.org/2000/svg",s.tag):document.createElement(s.tag):document.createTextNode(""),t)for(!function(e,t,n){a(e).replaceChild(t,n)}(e,d,t);!d[i]&&t.firstChild;)l(d,t.firstChild);else l(e,d);if(3===d.nodeType)h.children[0]!==s.children[0]&&(d.textContent=s.children[0]);else{var m=e&&d[i]&&d._props.keys,g=function(e,t,n,r,s,i){for(var o=Object.keys(t).concat(Object.keys(n)),c=o.length,a={},l=0;l<c;l++){var p=o[l];if(t[p]!==n[p]){if(s&&s.indexOf(p)>-1){a[p]=n[p];continue}if("function"==typeof n[p]||"function"==typeof t[p])t[p]&&e.removeEventListener(p,t[p]),e.addEventListener(p,n[p]);else if(p in n)if(p in e&&!r||r&&"style"===p)if("style"===p)if("object"==typeof n[p]){var u=t[p]||{},f=n[p];for(var h in f)u[h]!==f[h]&&(e.style[h]=f[h]);n[p]=Object.assign({},u,f)}else e.style.cssText=n[p];else e[p]=n[p];else{if(r&&"xmlns"===p)continue;r?e.setAttributeNS(null,p,n[p]):e.setAttribute(p,n[p])}else i?n[p]=t[p]:e.removeAttribute(p)}}return a}(d,h.props,s.props,p,m,m);if(d[i]&&e)g.children=s.children.map(function(e){return e.tag?e:e.children}),d.setProperties(g);else if(d)for(var y=Array.from(d.childNodes),b=Math.max(y.length,s.children.length),_=0;_<b;_++)f(d,y[_],s.children[_],c,p)}}else e&&t&&function(e,t){a(e).removeChild(t)}(e,t);return d[o]=v,e}e.h=t,e.Element=class extends HTMLElement{constructor(){super(),this[i]=!0,this.slots={},this.props={children:[]},this.isMount=!1,this.preventRender=!0,this.content=document.createDocumentFragment(),this._class=this.constructor,this._name=this.tagName.toLocaleLowerCase(),this._props=p(this._class.props)}static get props(){return{}}static get observedAttributes(){return p(this.props).keys}connectedCallback(){var e=this;c(function(){for(;e.firstChild;){var t=e.firstChild,n=t.getAttribute&&t.getAttribute("slot");n&&(e.slots[n]=t),l(e.content,t)}e.preventRender=!1,e.setState({},function(){e.isMount=!0,e.elementMount()})})}setAttribute(e,t){var n;this._props.keys.indexOf(e)>-1?this.setProperties(((n={})[e]=t,n)):super.setAttribute(e,t)}setProperties(e){var t={},n=this.isMount;for(var r in e){var s=this._props.types[r],i=e[r],o=void 0;s&&(i=s(i)),o=r.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()}),i!==this.props[o]&&(t[o]=i)}Object.keys(t).length&&(n&&(n=!1!==this.elementReceiveProps(t)),this.props=Object.assign({},this.props,t),n&&this.setState({}))}attributeChangedCallback(e,t,n){var r;this.setProperties(((r={})[e]=n,r))}disconnectedCallback(){this.elementMount()}setState(e,n){var r=this;"object"==typeof e&&(this.state=Object.assign({},this.state,e),this.preventRender||(this.preventRender=!0,c(function(){var e=r.render();if(s(e)){var i="host"===e.tag;e=t(r._name,i?e.props:{},i?e.children:e)}else e=t(r._name,{},e);f(!1,r,e,r.slots),r.preventRender=!1,n?n():r.elementUpdate()})))}elementMount(){}elementUnmount(){}elementUpdate(){}elementReceiveProps(){}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
