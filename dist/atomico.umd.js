!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Atomico={})}(this,function(e){"use strict";var t="Atomico",n="elementMount",i="elementUnmount",r="elementReceiveProps";function s(e,t){for(var n={},i=0;i<e.length;i++){var r=e[i],s=t instanceof HTMLElement?t.getAttribute(r):t[r];n[r.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()})]=s}return n}function o(e){return e.shadowRoot||e}function c(e,t){o(e).removeChild(t)}function a(e,t){o(e).appendChild(t)}function l(e,t,n){o(e).replaceChild(t,n)}function h(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function d(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?d(i,t):t.push("object"==typeof(r=i)&&r instanceof h?i:new h("",{},i||""))}var r;return t}function f(e,t,n,i,s){for(var o=Object.keys(t).concat(Object.keys(n)),c=0;c<o.length;c++){var a=o[c];if(s="class"===s?"className":s,t[a]!==n[a]){if(s&&e._props.indexOf(a)>-1){s[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof t[a])t[a]&&e.removeEventListener(a,t[a]),e.addEventListener(a,n[a]);else if(a in n)if(a in e&&!i||i&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var l in n[a])e.style[l]=n[a][l];else e.style.cssText=n[a];else e[a]=n[a];else{if(i&&"xmlns"===a)continue;i?e.setAttributeNS(null,a,n[a]):e.setAttribute(a,n[a])}else e.removeAttribute(a)}}s&&e.dispatch(r,s)}e.h=function(e,t){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return new h(e,t,d(n))},e.Element=class extends HTMLElement{constructor(){super(),this[t]=!0,this.state={},this._props=this.constructor.props||[],this.props=s(this._props,this),this.props.children=[],this._render=[],this.load()}static get observedAttributes(){return this.props||[]}load(){var e=this,t=!0;this.listeners=[n,i,r].map(function(i){var s=function(s){s.type===i&&(i===n&&(t=!1),t||(e[i]&&e[i](s),s.defaultPrevented||(i===r&&(e.props=Object.assign({},e.props,s.detail)),e.setState({}))))};return e.addEventListener(i,s),function(){return e.removeEventListener(i,s)}})}connectedCallback(){this.dispatch(n)}disconnectedCallback(){this.dispatch(i),this.listeners.forEach(function(e){return e()})}attributeChangedCallback(e,t,n){var i;t!==n&&this.dispatch(r,s([e],((i={})[e]=n,i)))}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{cancelable:!0,detail:t}))}setState(e){if(e){this.state=Object.assign({},this.state,e);var n=d([this.render()]);!function e(n,i,r,s){for(var o=n.childNodes||[],d=Math.max(i.length,r.length),u=0;u<d;u++){var p=i[u]||new h,v=r[u],m=o[u];if(v){var g=m;if(s=s||"svg"===v.tag,p.tag!==v.tag)if(v.tag)if(g=s?document.createElementNS("http://www.w3.org/2000/svg",v.tag):document.createElement(v.tag),m){if(l(n,g,m),!g[t])for(;m.firstChild;)a(g,m.firstChild)}else a(n,g);else g=document.createTextNode(""),p.tag?l(n,g,m):a(n,g);"#text"===g.nodeName?p.children!==v.children&&(g.textContent=v.children):(f(g,p.props,v.props,s,g[t]&&{children:v.children.map(function(e){return e.children})}),g&&!g[t]&&e(g,p.children,v.children,s))}else m&&c(n,m)}}(o(this),this._render,n),this._render=n}}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
