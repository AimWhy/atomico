!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico",n="elementMount",i="elementUnmount",r="elementReceiveProps";function s(t,e){for(var n={},i=0;i<t.length;i++){var r=t[i],s=e instanceof HTMLElement?e.getAttribute(r):e[r];n[r.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()})]=s}return n}function o(t){return t.shadowRoot||t}function c(t,e){o(t).removeChild(e)}function a(t,e){o(t).appendChild(e)}function l(t,e,n){o(t).replaceChild(e,n)}function h(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function f(t){return"object"==typeof t&&11!==t.nodeType}function d(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?d(i,e):e.push("object"==typeof(r=i)&&r instanceof h?i:f(i)?new h(i,{},""):new h("",{},i||""))}var r;return e}function u(t,e,n,i,s){for(var o=Object.keys(e).concat(Object.keys(n)),c=0;c<o.length;c++){var a=o[c];if(e[a]!==n[a]){if(s&&t._props.indexOf(a)>-1){s[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof e[a])e[a]&&t.removeEventListener(a,e[a]),t.addEventListener(a,n[a]);else if(a in n)if(a in t&&!i||i&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var l in n[a])t.style[l]=n[a][l];else t.style.cssText=n[a];else t[a]=n[a];else{if(i&&"xmlns"===a)continue;i?t.setAttributeNS(null,a,n[a]):t.setAttribute(a,n[a])}else t.removeAttribute(a)}}s&&t.dispatch(r,s)}function p(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}t.h=function(t,e){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return new h(t,e,d(n))},t.Element=class extends HTMLElement{constructor(){for(super(),this[e]=!0,this.state={},this.slots={},this._props=this.constructor.props||[],this._render=[],this.props=s(this._props,this),this.props.children=[],this.fragment=document.createDocumentFragment();this.firstChild;){var t=this.firstChild,n=t.getAttribute&&t.getAttribute("slot");n&&(this.slots[n]=t),a(this.fragment,t),this.props.children.push(t)}this.livecycle()}static get observedAttributes(){return this.props||[]}livecycle(){var t=this,e=!0;this.listeners=[n,i,r].map(function(i){var s=function(s){s.type===i&&(i===n&&(e=!1),e||(t[i]&&t[i](s),s.defaultPrevented||(i===r&&(t.props=Object.assign({},t.props,s.detail)),t.setState({}))))};return t.addEventListener(i,s),function(){return t.removeEventListener(i,s)}})}connectedCallback(){this.dispatch(n)}disconnectedCallback(){this.dispatch(i),this.listeners.forEach(function(t){return t()})}attributeChangedCallback(t,e,n){var i;e!==n&&this.dispatch(r,s([t],((i={})[t]=n,i)))}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}setState(t){if(t){this.state=Object.assign({},this.state,t);var n=d([this.render()]);!function t(n,i,r,s,o){void 0===s&&(s=n);for(var d=n.childNodes||[],v=Math.max(i.length,r.length),g=0;g<v;g++){var m=i[g]||new h,b=r[g],y=d[g];if(b){b=p(b,s),m=p(m,s);var C=y,E=f(b.tag);if(o=o||"svg"===b.tag,m.tag!==b.tag)if(E)C=b.tag,y?l(n,C,y):a(n,C);else if(b.tag)if(C=o?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(l(n,C,y),!C[e])for(;y.firstChild;)a(C,y.firstChild)}else a(n,C);else C=document.createTextNode(""),m.tag?l(n,C,y):a(n,C);E||"#text"!==C.nodeName?(u(C,m.props,b.props,o,C[e]&&{children:b.children.map(function(t){return t.tag?t:t.children})}),E||!C||C[e]||t(C,m.children,b.children,s,o)):m.children!==b.children&&(C.textContent=b.children)}else y&&c(n,y)}}(o(this),this._render,n),this._render=n}}render(){}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
