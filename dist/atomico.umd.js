!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.atomico={})}(this,function(e){"use strict";function t(e,t){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];return new n(e,t,function e(t,i){void 0===i&&(i=[]);for(var o=0;o<t.length;o++){var c=t[o];Array.isArray(c)?e(c,i):i.push(s(c)?c:r(c)?new n(c,{},""):new n("",{},c||""))}return i}(i))}function n(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function r(e){return null!==e&&"object"==typeof e&&11!==e.nodeType}function s(e){return"object"==typeof e&&e instanceof n}var i="__atomico_el__",o="__atomico_prev__";function c(e){return Promise.resolve().then(e)}function l(e){return e.shadowRoot||e}function a(e,t){l(e).appendChild(t)}function p(e,t,n){l(e).replaceChild(t,n)}function u(e,t){return"slot"===e.tag?new n(t[e.props.name]||"",e.props,e.children):e}function h(e,t,s,c,f){void 0===c&&(c={});var d,v=t&&t[o]?t[o]:new n,m=t,g=s;if(s){if(s=u(s,c),v=u(v,c),f=f||"svg"===s.tag,d=r(s.tag),e&&v.tag!==s.tag)if(d)m=s.tag,t?p(e,m,t):a(e,m);else if(s.tag)if(m=f?document.createElementNS("http://www.w3.org/2000/svg",s.tag):document.createElement(s.tag),t){if(p(e,m,t),!m[i])for(;t.firstChild;)a(m,t.firstChild)}else a(e,m);else m=document.createTextNode(""),v.tag?p(e,m,t):a(e,m);if(3===m.nodeType)v.children!==s.children&&(m.textContent=s.children);else{var y=m[Element],b=function(e,t,n,r,s){for(var i=Object.keys(t).concat(Object.keys(n)),o={},c=0;c<i.length;c++){var l=i[c];if(t[l]!==n[l]){if(s&&s.indexOf(l)>-1){o[l]=n[l];continue}if("function"==typeof n[l]||"function"==typeof t[l])t[l]&&e.removeEventListener(l,t[l]),e.addEventListener(l,n[l]);else if(l in n)if(l in e&&!r||r&&"style"===l)if("style"===l)if("object"==typeof n[l])for(var a in n[l])e.style[a]=n[l][a];else e.style.cssText=n[l];else e[l]=n[l];else{if(r&&"xmlns"===l)continue;r?e.setAttributeNS(null,l,n[l]):e.setAttribute(l,n[l])}else e.removeAttribute(l)}}return o}(m,v.props,s.props,f,y&&m._props.keys);if(y)b.children=s.children.map(function(e){return e.tag?e:e.children}),this.setProperties(b);else if(m)for(var _=Array.from(m.childNodes),C=Math.max(_.length,s.children.length),j=0;j<C;j++)h(m,_[j],s.children[j],c,f)}m[o]=g}else e&&t&&function(e,t){l(e).removeChild(t)}(e,t);return e}e.h=t,e.Element=class extends HTMLElement{constructor(){super(),this[i]=!0,this.slots={},this.props={},this.preventRender=!0,this.content=document.createDocumentFragment(),this.class=this.constructor,this._props={keys:this.class.observedAttributes,types:this.class.props}}static get props(){return{}}static get observedAttributes(){return Object.keys(this.props).concat("children")}get isMount(){return this[o]}connectedCallback(){var e=this;c(function(){for(var t=[];e.firstChild;){var n=e.firstChild,r=n.getAttribute&&n.getAttribute("slot");r&&(e.slots[r]=n),a(e.content,n),t.push(n)}e.setProperties({children:t}),e.preventRender=!1,e.setState({})})}setAttribute(e,t){var n;this._props.keys.indexOf(e)>-1?this.setProperties(((n={})[e]=t,n)):super.setAttribute(e,t)}setProperties(e){var t={},n=this.isMount;for(var r in e){var s=this._props.types[r],i=e[r],o=void 0;s&&(i=s(i)),o=r.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()}),i!==this.props[o]&&(t[o]=i)}Object.keys(t).length&&(n&&(n=!1!==this.elementReceiveProps(t)),this.props=Object.assign({},this.props,t),n&&this.setState({}))}attributeChangedCallback(e,t,n){var r;this.setProperties(((r={})[e]=n,r))}disconnectedCallback(){this.elementMount()}setState(e){var n=this;"object"==typeof e&&(this.state=Object.assign({},this.state,e),this.preventRender||(this.preventRender=!0,c(function(){var e=n.render(),r=n.isMount;e=s(e)&&"host"===e.tag?e:t("host",null,e),h(!1,n,e,n.slots),n.preventRender=!1,r?n.elementUpdate():n.elementMount()})))}elementMount(){}elementUnmount(){}elementUpdate(){}elementReceiveProps(){}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
