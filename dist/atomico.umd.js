!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Atomico={})}(this,function(t){"use strict";function e(t){for(var e=/^on([A-Z])/,n=function(t){var e=[];do{e=e.concat(Object.getOwnPropertyNames(t))}while(t=Object.getPrototypeOf(t));return e}(t.prototype),r=[],o=0;o<n.length;o++){var i=n[o];n.indexOf(i)===o&&e.test(i)&&r.push({method:i,type:i.replace(e,function(t,e){return e.toLowerCase()})})}return r}function n(t,e){t.removeChild(e)}function r(t,e){t.appendChild(e)}function o(t,e,n){t.replaceChild(e,n)}function i(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}function s(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function a(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?a(r,e):e.push("object"==typeof(o=r)&&o instanceof s?r:new s("",{},r||""))}var o;return e}function c(t,e,n,r){for(var o=Object.keys(e).concat(Object.keys(n)),i=0;i<o.length;i++){var s=o[i];if(e[s]!==n[s])if("function"==typeof n[s]||"function"==typeof e[s])t[props.toLowerCase()]=n[s]||null;else if(s in n)if(s in t&&!r||r&&"style"===s)if("style"===s)if("object"==typeof n[s])for(var a in n[s])t.style[a]=n[s][a];else t.style.cssText=n[s];else t[s]=n[s];else r?t.setAttributeNS(null,s,n[s]):t.setAttribute(s,n[s]);else t.removeAttribute(s)}}t.h=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new s(t,e,a(n))},t.Component=class{constructor(t){var e=this;this.root=t,this.props={},this.state={};var u=[];this.setState=function(t){void 0===t&&(t={}),e.state=Object.assign({},e.state,t);var d=a([e.render()]);!function t(e,a,u,d){for(var f=e.childNodes||[],l=Math.max(a.length,u.length),p=0;p<l;p++){var h=a[p]||new s,v=u[p],g=f[p];if(v){var m=g;if(d=d||"svg"===v.tag,h.tag!==v.tag)if(v.tag)if(m=i(v.tag,d),g)for(o(e,m,g);g.firstChild;)m.appendChild(g.firstChild);else r(e,m);else m=document.createTextNode(""),h.tag?o(e,m,g):r(e,m);"#text"===m.nodeName?h.children!==v.children&&(m.textContent=v.children):(c(m,h.props,v.props,d),m&&t(m,h.children,v.children,d))}else g&&n(e,g)}}(e.root,u,d),u=d}}onMount(){}onUpdate(){}onUnmount(){}onRender(t){this.setState()}render(){}},t.register=function(t,n){var r=n.props||[],o=e(n);customElements.define(t,class extends HTMLElement{constructor(){super(),this.autorun(),this.root=new n(this)}static get observedAttributes(){return r}autorun(){var t=this;o.forEach(function(e){var n=e.type,r=e.method;t.addEventListener(n,function(e){t.root[r](e),e.defaultPrevented||("update"===n&&(t.root.props=Object.assign({},t.root.props,e.detail)),/^(render|unmount)$/.test(n)||t.dispatch("render"))},!0)})}connectedCallback(){this.dispatch("mount")}disconnectedCallback(){this.dispatch("unmount")}attributeChangedCallback(t,e,n){var o;this.dispatch("update",function(t,e){for(var n={},r=0;r<t.length;r++){var o=t[r],i=e instanceof HTMLElement?e.getAttribute(o):e[o];n[o.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()})]=/^json-/.test(o)?JSON.parse(i):i}return n}(r,((o={})[t]=n,o)))}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}})},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
