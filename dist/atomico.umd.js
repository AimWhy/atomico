!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Atomico={})}(this,function(e){"use strict";var t="Atomico",n="elementMount",r="elementUnmount",i="elementReceiveProps";function s(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r],s=t instanceof HTMLElement?t.getAttribute(i):t[i];n[i.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()})]=/^json-/.test(i)?JSON.parse(s):s}return n}function o(e){return e.shadowRoot||e}function a(e,t){o(e).removeChild(t)}function c(e,t){o(e).appendChild(t)}function l(e,t,n){o(e).replaceChild(t,n)}function d(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function f(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?f(r,t):t.push("object"==typeof(i=r)&&i instanceof d?r:new d("",{},r||""))}var i;return t}function h(e,t,n,r,s){for(var o=Object.keys(t).concat(Object.keys(n)),a=0;a<o.length;a++){var c=o[a];if(t[c]!==n[c]){if(s&&e._props.indexOf(c)>-1){s[c]=n[c];continue}if("function"==typeof n[c]||"function"==typeof t[c])t[c]&&e.removeEventListener(c,t[c]),e.addEventListener(c,n[c]);else if(c in n)if(c in e&&!r||r&&"style"===c)if("style"===c)if("object"==typeof n[c])for(var l in n[c])e.style[l]=n[c][l];else e.style.cssText=n[c];else e[c]=n[c];else r?e.setAttributeNS(null,c,n[c]):e.setAttribute(c,n[c]);else e.removeAttribute(c)}}s&&e.dispatch(i,s)}e.h=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new d(e,t,f(n))},e.Element=class extends HTMLElement{constructor(){super(),this.autorun()}static get observedAttributes(){return this.props||[]}autorun(){var e=this;this[t]=!0,this.state={},this.props={children:[]},this._props=this.constructor.props||[],this._render=[];var o=!0;this.listeners=[n,r,i].map(function(t){var r=function(r){r.type===t&&(t===n&&(e.props=Object.assign({},s(e._props,e)),o=!1),o||(e[t]&&e[t](r),r.defaultPrevented||(t===i&&(e.props=Object.assign({},e.props,r.detail)),e.setState({}))))};return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}})}connectedCallback(){this.dispatch(n)}disconnectedCallback(){this.dispatch(r),this.listeners.forEach(function(e){return e()})}attributeChangedCallback(e,t,n){var r;t!==n&&this.dispatch(i,s([e],((r={})[e]=n,r)))}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{cancelable:!0,detail:t}))}setState(e){if(e){this.state=Object.assign({},this.state,e);var n=f([this.render()]);!function e(n,r,i,s){for(var o=n.childNodes||[],f=Math.max(r.length,i.length),u=0;u<f;u++){var p=r[u]||new d,v=i[u],m=o[u];if(v){var g=m;if(s=s||"svg"===v.tag,p.tag!==v.tag)if(v.tag)if(g=s?document.createElementNS("http://www.w3.org/2000/svg",v.tag):document.createElement(v.tag),m){if(l(n,g,m),!g[t])for(;m.firstChild;)c(g,m.firstChild)}else c(n,g);else g=document.createTextNode(""),p.tag?l(n,g,m):c(n,g);"#text"===g.nodeName?p.children!==v.children&&(g.textContent=v.children):(h(g,p.props,v.props,s,g[t]&&{children:v.children.map(function(e){return e.children})}),g&&!g[t]&&e(g,p.children,v.children,s))}else m&&a(n,m)}}(o(this),this._render,n),this._render=n}}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
