!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico";function n(t){return requestAnimationFrame(t)}function r(t){return t.shadowRoot||t}function s(t,e){r(t).removeChild(e)}function i(t,e){r(t).appendChild(e)}function o(t,e,n){r(t).replaceChild(e,n)}function a(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function c(t){return null!==t&&"object"==typeof t&&11!==t.nodeType}function l(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?l(r,e):e.push("object"==typeof(s=r)&&s instanceof a?r:c(r)?new a(r,{},""):new a("",{},r||""))}var s;return e}function p(t,e,n,r,s){for(var i=Object.keys(e).concat(Object.keys(n)),o=0;o<i.length;o++){var a=i[o];if(e[a]!==n[a]){if(s&&t._props.indexOf(a)>-1){s[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof e[a])e[a]&&t.removeEventListener(a,e[a]),t.addEventListener(a,n[a]);else if(a in n)if(a in t&&!r||r&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var c in n[a])t.style[c]=n[a][c];else t.style.cssText=n[a];else t[a]=n[a];else{if(r&&"xmlns"===a)continue;r?t.setAttributeNS(null,a,n[a]):t.setAttribute(a,n[a])}else t.removeAttribute(a)}}s&&t.setProps(s)}function h(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}t.h=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new a(t,e,l(n))},t.Element=class extends HTMLElement{constructor(){super(),this[e]=!0,this.state={},this.slots={},this.props={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._mount,this._prevent}static get observedAttributes(){return["children"].concat(this.props||[])}setAttribute(t,e){var n;this._props.indexOf(t)>-1?this.setProps(Object.assign({},this.props,((n={})[t]=e,n))):super.setAttribute(t,e)}connectedCallback(){var t=this;n(function(){for(var e=t.props.children||[];t.firstChild;){var n=t.firstChild,r=n.getAttribute&&n.getAttribute("slot");r&&(t.slots[r]=n),i(t.fragment,n),e.push(n)}t.setProps(Object.assign({},t.props,{children:e})),t.setState({},t._mount=!0),t.elementMount()})}disconnectedCallback(){this.elementUnmount()}setProps(t){var e={},n=this._mount,r=[];for(var s in t){var i=s.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()});(e[i]=t[s])!==this.props[i]&&r.push(i)}r.length&&(n&&(n=this.elementReceiveProps(e,r)),this.props=e,!1!==n&&this._mount&&this.setState({}))}attributeChangedCallback(t,e,n){var r;e!==n&&this.setProps(Object.assign({},this.props,((r={})[t]=n,r)))}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}setState(t,u){var f=this;t&&(this.state=Object.assign({},this.state,t),this._prevent||(this._prevent=!0,n(function(){var t=l([f.render()]);!function t(n,r,l,u,f){void 0===u&&(u=n);for(var d=n.childNodes||[],m=Math.max(r.length,l.length),v=0;v<m;v++){var g=r[v]||new a,b=l[v],y=d[v];if(b){b=h(b,u),g=h(g,u);var _=y,C=c(b.tag);if(f=f||"svg"===b.tag,g.tag!==b.tag)if(C)_=b.tag,y?o(n,_,y):i(n,_);else if(b.tag)if(_=f?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(o(n,_,y),!_[e])for(;y.firstChild;)i(_,y.firstChild)}else i(n,_);else _=document.createTextNode(""),g.tag?o(n,_,y):i(n,_);C||"#text"!==_.nodeName?(p(_,g.props,b.props,f,_[e]&&{children:b.children.map(function(t){return t.tag?t:t.children})}),C||!_||_[e]||t(_,g.children,b.children,u,f)):g.children!==b.children&&(_.textContent=b.children)}else y&&s(n,y)}}(r(f),f._render,t),f._render=t,f._prevent=!1,u||f.elementUpdate(UPDATE)})))}elementMount(){}elementUpdate(){}elementUnmount(){}elementReceiveProps(){}render(){}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
