!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.atomico={})}(this,function(e){"use strict";var t="Atomico";function n(e){return Promise.resolve().then(e)}function r(e){return e.shadowRoot||e}function s(e,t){r(e).removeChild(t)}function i(e,t){r(e).appendChild(t)}function o(e,t,n){r(e).replaceChild(t,n)}function a(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}function c(e){return null!==e&&"object"==typeof e&&11!==e.nodeType}function l(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?l(r,t):t.push("object"==typeof(s=r)&&s instanceof a?r:c(r)?new a(r,{},""):new a("",{},r||""))}var s;return t}function h(e,t,n,r,s){for(var i=Object.keys(t).concat(Object.keys(n)),o=0;o<i.length;o++){var a=i[o];if(t[a]!==n[a]){if(s&&e._props.indexOf(a)>-1){s[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof t[a])t[a]&&e.removeEventListener(a,t[a]),e.addEventListener(a,n[a]);else if(a in n)if(a in e&&!r||r&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var c in n[a])e.style[c]=n[a][c];else e.style.cssText=n[a];else e[a]=n[a];else{if(r&&"xmlns"===a)continue;r?e.setAttributeNS(null,a,n[a]):e.setAttribute(a,n[a])}else e.removeAttribute(a)}}s&&e.setProps(s)}function p(e,t){return"slot"===e.tag&&(e.tag=t.slots[e.props.name]||""),e}e.h=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new a(e,t,l(n))},e.Element=class extends HTMLElement{constructor(){super(),this[t]=!0,this.state={},this.slots={},this.props={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._mount,this._prevent}static get observedAttributes(){return["children"].concat(this.props||[])}setAttribute(e,t){var n;this._props.indexOf(e)>-1?this.setProps(((n={})[e]=t,n)):super.setAttribute(e,t)}connectedCallback(){var e=this;n(function(){for(var t=e.props.children||[];e.firstChild;){var n=e.firstChild,r=n.getAttribute&&n.getAttribute("slot");r&&(e.slots[r]=n),i(e.fragment,n),t.push(n)}e.setProps({children:t}),e.setState({},e._mount=!0),e.elementMount()})}disconnectedCallback(){this.elementUnmount()}setProps(e){var t={},n=this._mount;for(var r in e){var s=r.replace(/-+([\w])/g,function(e,t){return t.toUpperCase()});e[r]!==this.props[s]&&(t[s]=e[r])}Object.keys(t).length&&(n&&(n=this.elementReceiveProps(t)),this.props=Object.assign({},this.props,t),!1!==n&&this._mount&&this.setState({}))}attributeChangedCallback(e,t,n){var r;t!==n&&this.setProps(((r={})[e]=n,r))}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{cancelable:!0,detail:t}))}setState(e,u){var f=this;e&&(this.state=Object.assign({},this.state,e),this._prevent||(this._prevent=!0,n(function(){var e=l([f.render()]);!function e(n,r,l,u,f){void 0===u&&(u=n);for(var d=n.childNodes||[],v=Math.max(r.length,l.length),m=0;m<v;m++){var g=r[m]||new a,b=l[m],y=d[m];if(b){b=p(b,u),g=p(g,u);var _=y,C=c(b.tag);if(f=f||"svg"===b.tag,g.tag!==b.tag)if(C)_=b.tag,y?o(n,_,y):i(n,_);else if(b.tag)if(_=f?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(o(n,_,y),!_[t])for(;y.firstChild;)i(_,y.firstChild)}else i(n,_);else _=document.createTextNode(""),g.tag?o(n,_,y):i(n,_);C||"#text"!==_.nodeName?(h(_,g.props,b.props,f,_[t]&&{children:b.children.map(function(e){return e.tag?e:e.children})}),C||!_||_[t]||e(_,g.children,b.children,u,f)):g.children!==b.children&&(_.textContent=b.children)}else y&&s(n,y)}}(r(f),f._render,e),f._render=e,f._prevent=!1,u||f.elementUpdate()})))}elementMount(){}elementUpdate(){}elementUnmount(){}elementReceiveProps(){}render(){}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
