!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";var e="Atomico",n="elementMount",i="elementUnmount",r="elementUpdate",s="elementReceiveProps";function o(t){return requestAnimationFrame(t)}function a(t){return t.shadowRoot||t}function c(t,e){a(t).removeChild(e)}function h(t,e){a(t).appendChild(e)}function u(t,e,n){a(t).replaceChild(e,n)}function d(t,e,n){this.tag=t,this.props=e||{},this.children=n||[]}function l(t){return null!==t&&"object"==typeof t&&11!==t.nodeType}function p(t,e){void 0===e&&(e=[]);for(var n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?p(i,e):e.push("object"==typeof(r=i)&&r instanceof d?i:l(i)?new d(i,{},""):new d("",{},i||""))}var r;return e}function f(t,e,n,i,r){for(var s=Object.keys(e).concat(Object.keys(n)),o=0;o<s.length;o++){var a=s[o];if(e[a]!==n[a]){if(r&&t._props.indexOf(a)>-1){r[a]=n[a];continue}if("function"==typeof n[a]||"function"==typeof e[a])e[a]&&t.removeEventListener(a,e[a]),t.addEventListener(a,n[a]);else if(a in n)if(a in t&&!i||i&&"style"===a)if("style"===a)if("object"==typeof n[a])for(var c in n[a])t.style[c]=n[a][c];else t.style.cssText=n[a];else t[a]=n[a];else{if(i&&"xmlns"===a)continue;i?t.setAttributeNS(null,a,n[a]):t.setAttribute(a,n[a])}else t.removeAttribute(a)}}r&&t.setProps(r)}function v(t,e){return"slot"===t.tag&&(t.tag=e.slots[t.props.name]||""),t}t.h=function(t,e){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return new d(t,e,p(n))},t.Element=class extends HTMLElement{constructor(){super(),this[e]=!0,this.state={},this.slots={},this.props={},this.fragment=document.createDocumentFragment(),this._props=this.constructor.props||[],this._render=[],this._listener=[],this._mount,this._prevent,this.livecycle()}static get observedAttributes(){return["children"].concat(this.props||[])}livecycle(){var t=this;this.addEventListener(n,function(e){return t[n]&&t[n](e)}),this.addEventListener(i,function(e){return t[i]&&t[i](e)}),this.addEventListener(r,function(e){return t[r]&&t[r](e)}),this.addEventListener(s,function(e){t[s]&&t[s](e),e.defaultPrevented||t.setState({})})}setAttribute(t,e){var n;this._props.indexOf(t)>-1?this.setProps(Object.assign({},this.props,((n={})[t]=e,n))):super.setAttribute(t,e)}connectedCallback(){var t=this;this.props.children=[],o(function(){for(;t.firstChild;){var e=t.firstChild,i=e.getAttribute&&e.getAttribute("slot");i&&(t.slots[i]=e),h(t.fragment,e),t.props.children.push(e)}t.setState({},t._mount=!0),t.dispatch(n)})}disconnectedCallback(){this.dispatch(i),this._listener.forEach(function(t){return t()})}setProps(t){var e,n={};for(var i in t)-1!==this._props.indexOf(i)&&(n[(e=i,e.replace(/-+([\w])/g,function(t,e){return e.toUpperCase()}))]=t[i]);this._mount&&this.dispatch(s,n),this.props=n}attributeChangedCallback(t,e,n){var i;this.setProps(Object.assign({},this.props,((i={})[t]=n,i)))}addEventListener(t,e,n){var i=this;super.addEventListener(t,e,n),this._listener.push(function(){return i.removeEventListener(t,e)})}dispatch(t,e){this.dispatchEvent(new CustomEvent(t,{cancelable:!0,detail:e}))}setState(t,n){var i=this;t&&(this.state=Object.assign({},this.state,t),this._prevent||(this._prevent=!0,o(function(){var t=p([i.render()]);!function t(n,i,r,s,o){void 0===s&&(s=n);for(var a=n.childNodes||[],p=Math.max(i.length,r.length),m=0;m<p;m++){var g=i[m]||new d,b=r[m],y=a[m];if(b){b=v(b,s),g=v(g,s);var _=y,E=l(b.tag);if(o=o||"svg"===b.tag,g.tag!==b.tag)if(E)_=b.tag,y?u(n,_,y):h(n,_);else if(b.tag)if(_=o?document.createElementNS("http://www.w3.org/2000/svg",b.tag):document.createElement(b.tag),y){if(u(n,_,y),!_[e])for(;y.firstChild;)h(_,y.firstChild)}else h(n,_);else _=document.createTextNode(""),g.tag?u(n,_,y):h(n,_);E||"#text"!==_.nodeName?(f(_,g.props,b.props,o,_[e]&&{children:b.children.map(function(t){return t.tag?t:t.children})}),E||!_||_[e]||t(_,g.children,b.children,s,o)):g.children!==b.children&&(_.textContent=b.children)}else y&&c(n,y)}}(a(i),i._render,t),i._render=t,i._prevent=!1,n||i.dispatch(r)})))}render(){}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
