!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.atomico={})}(this,function(t){"use strict";const e="element-collect",s="element-master";function n(t){return t.shadowRoot||t}function r(t,e){n(t).appendChild(e)}function i(t,e,...s){return new o(t,e,function t(e,s=[]){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?t(r,s):s.push(l(r)?r:new o("",{},[r||""]))}return s}(s))}class o{constructor(t,e,s){this.tag=t,this.props=e||{},this.children=s||[]}clone(t=this.tag,e=this.props,s=this.children){return new o(t,Object.assign({},e),s)}}function l(t){return"object"==typeof t&&t instanceof o}function c(t,i,l,h={},a){let d=i&&i[s]||new o,u=i,f=l;if(l){let s="slot"===l.tag;if(l=p(l,h),d=p(d,h),a=a||"svg"===l.tag,t&&d.tag!==l.tag)if(u=null!==(g=l.tag)&&"object"==typeof g&&11!==g.nodeType?l.tag:l.tag?a?document.createElementNS("http://www.w3.org/2000/svg",l.tag):document.createElement(l.tag):document.createTextNode(""),i)for(!function(t,e,s){n(t).replaceChild(e,s)}(t,u,i);!s&&!l.collect&&i.firstChild;)r(u,i.firstChild);else r(t,u);if(3===u.nodeType)d.children[0]!==l.children[0]&&(u.textContent=l.children[0]);else{let n=t&&u[e]||{},r=function(t,e,s,n,r){let i=Object.keys(e).concat(Object.keys(s)),o=i.length,l={};for(let c=0;c<o;c++){let o=i[c];if((!n||"xmlns"!==o)&&e[o]!==s[o]){if(r&&r.indexOf(o)>-1){l[o]=s[o];continue}let i="function"==typeof s[o],c="function"==typeof e[o];if(i||c)c&&t.removeEventListener(o,e[o]),i&&t.addEventListener(o,s[o]);else if(o in s)if(o in t&&!n||n&&"style"===o)if("style"===o)if("object"==typeof s[o]){let n=e[o]||{},r=s[o];for(let e in r)n[e]!==r[e]&&("-"===e[0]?t.setProperty(e,r[e]):t.style[e]=r[e]);s[o]=Object.assign({},n,r)}else t.style.cssText=s[o];else t[o]=s[o];else n?t.setAttributeNS(null,o,s[o]):t.setAttribute(o,s[o]);else r?s[o]=e[o]:t.removeAttribute(o)}}return l}(u,l.tag===d.tag?d.props:{},l.props,a,n.props);if(n.handler)r.children=l.children.map(t=>t.tag?t:t.children[0]),n.handler(r);else if(!s&&u){let t=Array.from((u.shadowRoot||u).childNodes),e=Math.max(t.length,l.children.length);for(let s=0;s<e;s++)c(u,t[s],l.children[s],h,a)}}}else t&&i&&function(t,e){n(t).removeChild(e)}(t,i);var g;return u[s]=f,u}function h(t,s,n){this.observer=t[e]={props:s,handler:n}}function p(t,e){return"slot"===t.tag?(delete(t=t.clone(e[t.props.name]||"")).props.name,t):t}function a(t){return Promise.resolve().then(t)}function d(t){let e=Array.isArray(t);return{keys:(e?t:Object.keys(t)).concat("children"),types:e?{}:t}}t.Element=class extends HTMLElement{constructor(){super(),this.props={},this.slots={},this.state={},this.preventRender=!0,this.is=this.nodeName.toLocaleLowerCase(),this._props=d(this.constructor.props),new h(this,this._props.keys,t=>this.setProperties(t))}get content(){return this.shadowRoot||this}static get props(){return[]}static get observedAttributes(){return d(this.props).keys}setAttribute(t,e){this._props.keys.indexOf(t)>-1?this.setProperties({[t]:e}):super.setAttribute(t,e)}setProperties(t){let e={},s=this.isMounted;for(let s in t){let n,r=this._props.types[s],i=t[s];i=r?r(i):i,n=s.replace(/-+([\w])/g,(t,e)=>e.toUpperCase()),i!==this.props[n]&&(e[n]=i)}Object.keys(e).length&&(s&&(s=!1!==this.onUpdate(e)),this.props=Object.assign({},this.props,e),s&&this.setState({}))}setState(t,e){"object"==typeof t&&(this.state=Object.assign({},this.state,t),this.preventRender||(this.preventRender=!0,a(()=>{let t=this.render();c(!1,this,(t=l(t)&&"host"===t.tag?t:i("host",{},t)).clone(this.is),this.slots),this.preventRender=!1,e?e():this.onUpdated()})))}connectedCallback(){a(()=>{let t=document.createDocumentFragment();for(;this.firstChild;){let e=this.firstChild,s=e.getAttribute&&e.getAttribute("slot");s&&(this.slots[s]=e),t.appendChild(e)}this.preventRender=!1,this.setState({},()=>{this.isMounted=!0,this.onMounted()})})}disconnectedCallback(){this.onUnmounted()}attributeChangedCallback(t,e,s){e!==s&&this.setProperties({[t]:s})}onMounted(){}onUpdate(){}onUnmounted(){}onUpdated(){}render(){}},t.h=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
